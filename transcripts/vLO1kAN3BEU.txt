oh you know what I got to do you know
what I you know what I gotta enable for
sure I gotta enable co-pilot let's
reload this the co-pilot is just
beautiful love it love it so gpd4 let's
ask how can I deploy in Azure function
to azure
on a Linux consumption plan with
terraform
let's see what it says here oh I should
I should have put
I should have put that it's dot net so
whenever I learned something new in
cloud or in Tech in general I never
learned it from scratch
um and I think the more you learn Cloud
the less you're gonna have to learn
stuff from scratch so right now the
association pattern is I know Cloud I
know bicep I know Azure functions I know
what I fully deployed function has to
look like when it's in Azure so the
missing part is terraform so okay using
all that how do I grab terraform and
like implement it right
look at this y'all
uh uh Linux
can I just copy all of this
lovely open this up clear
CDs Claireand I wonder if he'll do it all
in one shot
terraform Dash version or is it Dash
Dash
nice okay
ensure you have the agency line
installed in your machine
oh yeah I have that and that you are
signed into your added account by
running I'm pretty sure I'm I'm pretty
sure
easy account show Dash Dash
query
I think it's just name
Okay cool so I'm set to the right one
there what else I gotta do
uh create a terraform configuration file
create a new directory for your
terraform configuration files and
navigate to it create a new file name
main.tf all right that's it that's what
this first step right there
let's go into here
uh where are we here
uh CD infra and then we'll do
uh no code main.tfhere we goextension has search Market let's see
what extensions they have yeplet's let's do this also just to preface
everything I I have never used terraform
ever so this like I'm gonna make a lot
of mistakes but I want to embrace
that how can I deploy an Azure function
on Lexus country plan no and Azure eight
so we can put here dot net oh come on
dot net seven
out of process Azure function let's be
more we'll be more specific there okay
look at me I'm gonna be a devops
engineer in no timethis is probably not right
also this is this doesn't seem like it's
done it like stopped it's like stopped
generating
but for now we can copy copy this code
hereso
so we're gonna.net I know so I know for
a fact this needs to be done it isolated
just I know that because I've deployed
this so many times with umwith other tools
already so let's look through this let's
look through this
let's look through what it generated us
okay provider Azure RM I know a
terraform uses providers
um as in like that's where it gets gonna
get deployed
rightI don't want to use up my tokens for
gpt4 so let's go to Bing let's go to
Bing chat what is a provider
and tear okay you're you're gonna
respond to meuh
uh in terraforma providers a plug-in
that allows users to manage an external
API okay it acts as a translation layer
that allows terraform to communicate
with many different Cloud providers
databases and services all right so it's
like sinceriform is cloud agnostic you
got to kind of tell it what to work what
to work with right cool cool cool so
that makes sense resource
Azure RM underscore Resource Group okay
so this is
example
resource
uh
uh resource okay so okay okay okay
so we're creating a resource of type
Azure RM Resource Group and I'm assuming
this is the name but we're going to call
this uh
timestamper API Dash resource actually
no hold on usually and I'm sure this
needs to be abstracted into some kind of
variable or per parameters or something
like that but for right now we're just
going to leave here uh the my preference
is to always do RG Dash so for resource
groups some people do RG at the end but
I do RG at the beginning because that's
just what works for me okay
and I don't want West Europe as my
location I want east east
us2 name hold on no
example name what's the difference
between this
and this or are these the same this here
okay okay okay okay hold on no I get it
I get it now
I get it
this name is the name within the
terraform file right the referencing yes
so if I need to reference it in the rest
of the file that's the name this name is
actually what is going to be set as the
name in Azure all right so this needs to
be RG so in this case and I can probably
just call this
Resource Group name or maybe just a
resource Group
that's fine okay cool
so next we have here I'm just going to
call this first of all storage account
storage account because we already know
this is a reference name right Azure RM
search account name we're going to call
this
timestamper API store that might be a
little too long Resource Group name uh
this is not example anymore this is
Resource Group oops
Resource Group
dot name
and then location would be Resource
Group
uh location oh no this is wrong hold on
wait Resource Group name restrict
location you see us okay cool
account to your standard lrs perfectresource
Azure RM app service plan okay we'll
call this app service plan
and we're going to call this timestamper
Stamper APIplan there I don't know if hyphens are
allowed in plan names so we'll just
leave it like that for now the location
would be research group
Dash no come on
research group Resource Group name which
is Group location kind function app
uh Reserve true okay so also skus so
again remember I mentioned it's going to
be easier for me
it's going to be easier for me to
to learn something like terraform given
that I already have the context of what
like what a deployed function looks like
how to deploy a function to Azure using
other Technologies like bicep right so
in this case it's telling us okay what
SKU do we need here
well I know it has to be dynamic and of
type y1 because in bicep you also have
to Define it this way as well right so
boom cool
this is lovely like GPT generated all
this now it's gonna work that's another
question but we're we're walking through
this step by step okay uh I don't know
if y'all I share this on my Community
page but what we're doing is I have this
this application here that will I
provided a YouTube URL and it provides
me time stamps you can see on the left
side here it has like time stamps and
like a little summary of what happens
during that time
but it's just code the code's kind of
messy and ideally when you're creating a
cloud project you want to include cicd
you want to include infrastructure as
code you want to test it if possible you
want to create like some documentation
so the code and people in the ways
people can use it locally is here but
there's more stuff I can add now I
thought there would be a fantastic
opportunity for me to learn something
new like terraform
I leveraged my existing skill set with
bicep and Azure and be like okay how do
I use styrofoam to deploy this and then
I'll have a project using terraform boom
okay but I'm not learning from scratch
Association pattern my friends Okay cool
so that's what I'm doing okay if
anyone's interested in checking out this
API I'll send it here
uh all right cool go back here and we're
back in here okay so let's look at the
actual function app resource
uh awesome also thanks I was able to get
a devops offer two months ago coming
from software engineer background
because of your videos that is so
awesome I am so proud of you thank you
for letting me know that
um I'm always super happy to hear when
people land the jobs that they want make
the moves that they want to make
um so I try I try so hard to like keep
creating and keep making this stuff free
because you never know who it's gonna
help so that's awesome
I think this is good
so how do I deploy thislet's do terraform Dash helpit says prepare your working directory
for other commands well check where the
configuration is valid all right let's
do that right tarot form terraform
validate oh no no it's not validate it's
yeah
the configuration requires provider
registry but that product is available
you may be able to install automatic
terraforming all right terraform init
terraforming it y'all
terraform has successfully been
initialized okay
terraform validate does it work now no
something's up
oh there's another one the Azure RM
function app slot resource has been okay
so we gotta we gotta replace this toookay so we'll go down here see I had to
update all this GPT code
so our jobs are safe for now people
this is the good news
I don't know I feel like this is not
gonna work but we'll see
oh my goodness y'all
look at thisso how do we deploy this terraform help
we'll see can I do just Dash h
terraform laga provider refresh show
test unite workspace
uh
uh plan plan show changes required by
the current configuration okay
create or update infrastructure knit
validate okay so next one is to do
terraform plan
what we're going to do is do AZ group AZ
group list and we'll do an output table
and we'll see what groups I have just to
make sure I do have a Time Stamper group
but I don't have a timestamper what am I
calling it here I want to make sure okay
we're going to call it timestamper API
okay
soit should deploy timestamper API if it's
correct
okay
let's take a look here
so it says terraform will perform the
following actions terraform function app
will be created
resource
all right okay cool let's just do it f
it
uh eight wait what was it what was the
terraform Dash help what was the thing
to deploy apply
terraform of play
terraform apply wait how does it know my
subscription how does it know where to
apply it to has no word or deploy I
don't think I ever set that up unless it
uses the context of the Azure CLI which
would be nice
let's see what happens thoughdo you want to perform these actions
terraform will perform these action
described okay so okay so does a does
apply does apply run plan as well that's
cool if it does do that that's cooluh should take from EnV that's awesome
that's cool
that's cool that's cool so I know all
right okay stops getting created y'all
let's take a lookthere we go
now if it's gonna get created
successfully I don't know but we'll take
a look here okay
we'll just do we'll just do this we'll
just we'll just output it to the table
for now I guess fineokay look at that we got now a function
app under the Reese the Reese the RG
timestamper API that's cool that's good
let's see
it completed all right so let's go to
Azure now
this
function extensions version needs to be
four
four nice work runtime worker run time
work it run time nice
this is cool so what I'm going to do
right now is just do a little a little
clear this up here
and then I'm going to do a git add
and then I'm gonna do a git commit
and I'm gonna say
created
infra files okay then I'm gonna do a
little get pushy
get push get get push lovely
and then I'm gonna go to my I'm gonna
close Bing I'll need you BingI'm gonna go to my GitHub
scroll up okay I'm Gonna Go My GitHub
and wait what happened I need to add in
the get ignore to ignore the proper
files from terraform what what do I need
to add to my get ignore it it get get
ignore file when I'm using terraform
terraform okay
so okay
I'm gonna copy this let's just do that
and let's add it to the bottom they're
from directory
no dash
this should do it because this is like
literally any file without terraform git
rebase Dash I
create it added infra okay so this is
the one that messed everything up right
let's see get rebate how do I delete
this commit all rightrebase pick reword edit squash fix up
break drop label reset
so essentially I want yeah I guess I
want to delete this this pick reword
squash break drop remove commit okay so
if I say
drop right and then I do write out boom
exitoh my goodness did I lose everything
code infra main.tfyeah there we go
boom oh my goodness I almost lost
absolutely everything oh back here here
we go okay here we go here we go here we
go
hold on people
we're gonna copy this
then we're going to paste this in hereand
we'll paste that in there so I haven't
added anything yet
so now if we do get at everything
get commit
added infra files
two files change
89 get push
oh my goodness it worked
all right let's go back hereand we have an infra folder and we have
the main.tf let's go we figured it out
we got a lot we got we gotta get my work
done y'all we we should we struggled we
suffered but we we got this done and and
most importantly my streak is still
strong
there we go look at that look at that
contribution graph
dude
so since
February 23rd almost a month out I've
been doing something every single day